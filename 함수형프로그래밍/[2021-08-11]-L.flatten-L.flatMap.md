# L.flatten과 L.flatMap

<br>

## L.flatten

<br>

`L.flatten`은 다음과 같은 역할을 하는 함수이다.

예를 들어 `[[1, 2], 3 , 4, [5, 6, 7]]` 같은 배열이 있을 때 이를 `[1, 2, 3, 4, 5, 6, 7]` 처럼 평탄화를 시켜준다.

```js
const isIterable = (a) => a && a[Symbol.iterator];

L.flatten = function* (iterable) {
  for (const a of iterable) {
    // 이터러블 이면 한 뎁스 더!
    if (isIterable(a)) {
      for (const b of a) {
        yield b;
      }
    } else {
      // 이터러블이 아니면 yield 한다.
      yield a;
    }
  }
};

const arr = [[1, 2], 3, 4, [5, 6, 7]];
const iterator = L.flatten(arr);

console.log([...iterator]);

// 즉시 실행하도록
const flatten = pipe(L.flatten, take(Infinity));

console.log(flatten(arr));
```

<br>

## L.flatMap

<br>

flatMap은 `map`과 `flatten`을 동시에 할 수 있는 함수이다. `flatMap`은 자바스크립트 스펙에 포함되어 있다.

```js
L.flatMap = curry(pipe(L.map, L.flatten));

const flatIter = L.flatMap(
  map((a) => a * a),
  [[1, 2], [3, 4, 5], [(7, 8, 9)]]
);

flatIter.next();
flatIter.next();
flatIter.next();
flatIter.next();

const flatMap = curry(pipe(L.map, flatten));

console.log(
  flatMap(
    (a) => a,
    [
      [1, 2],
      [3, 4],
      [5, 6, 7],
    ]
  )
);
```
