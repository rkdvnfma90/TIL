# 브라우저 성능 개선 지표

<br>

로딩 성능을 개선하는 방법을 알아보기 전에 개선점을 찾기 위해서는 어떤 기준으로 로딩 속도가 느린지 판별해야 한다. 성능 개선 지표 측정의 기준은 크게 `브라우저 입장`, `사용자 입장`으로 나눌 수 있다.

<br>
<br>

## 브라우저 입장

<br>
<br>

전통적인 성능 측정 방식은 브라우저에서 발생하는 이벤트인 `DomContentLoaded`, `load` 이벤트가 발생하는 시점으로 성능을 측정한다.

> 출처 https://ui.toast.com/![내비게이션 타이밍](https://user-images.githubusercontent.com/35218826/59728733-36851b80-9276-11e9-8ba8-a9e1997f251a.png)

위의 이미지는 `내비게이션 타이밍`을 나타낸 모델이고, `DomContentLoaded` 이벤트와 `load` 이벤트의 발생 시점이 빠를수록, 두 이벤트 발생 구간의 폭이 좁을수록 `성능이 좋다`는 의미이다.

<br>
<br>

### DomContentLoaded 이벤트 발생 시점

<br>

- HTML, CSS 파싱이 끝나는 시점
- DOM, CSSOM 구성이 끝난 시점 (렌더트리 준비 완료)

<br>

### load 이벤트 발생 시점

<br>

- HTML 상 필요한 모든 리소스가 로드된 시점

<br>

### 내비게이션 타이밍 API

<br>

브라우저에서 웹페이지 성능을 측정할 수 있도록 [내비게이션 타이밍 API](https://developer.mozilla.org/ko/docs/Web/API/Navigation_timing_API)을 제공한다. (DomContentLoaded, load 이벤트 발생 시점을 알 수 있음)

<br>

### 크롬 개발자 도구

<br>

크롬 개발자도구의 `Network`탭에서도 확인할 수 있다.

![image](https://user-images.githubusercontent.com/52060742/127741474-3b6a015f-16fd-492d-8ea4-8668a263e83c.png)

<br>
<br>

---

## 사용자 기준의 성능 측정

<br>
<br>

사용자 기준의 성능 측정은 사용자에게 컨텐츠를 보여주는 시점을 기반으로 한다. 의미 있는 컨텐츠가 처음 보이는 시점이 빠를수록 성능이 좋다고 판단한다.

구글에서는 웹페이지 로딩이 빠름과 느림을 느낄 수 있는 여러 시점을 정의하고 성능을 측정하는 지표로 사용하고 있다.

- FP (First Paint) : 흰 화면에서 무언가 처음으로 그려지기 시작하는 순간
- FCP (First Contentful Paint) : 텍스트나 이미지가 출력되기 시작하는 순간
- FMP (First Meaningful Paint) : 사용자에게 의미있는 컨텐츠가 그려지기 시작하는 순간 (CSS, 자바스크립트 로드 시작되고 스타일이 적용되어 주요 컨텐츠를 볼 수 있다.)
- TTI (Time to Interactive) : 자바스크립트 초기 실행이 완료되어 사용자가 직접 행동을 취할 수 있는 순간

이 중 가장 중요한 시점은 `FMP`이다. 로딩이 끝날때까지 흰 화면 대신 의미있는 컨텐츠를 보여주어 사용자에게 긍정적인 경험을 줄 수 있다. 즉, 사용자 기준에서 성능을 좋게 하기 위해 `FMP`를 앞당겨야 한다. -> `경로 최적화 진행`하면 됨!
